(()=>{"use strict";var e={633:(e,r)=>{var t,n;Object.defineProperty(r,"__esModule",{value:!0}),r.MethodEnum=r.StatusCodeEnum=void 0,function(e){e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.SERVER_ERROR=500]="SERVER_ERROR"}(t||(r.StatusCodeEnum=t={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(n||(r.MethodEnum=n={}))},103:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.userController=void 0;const n=t(663),s=t(633),o=t(71);r.userController=async(e,r,t)=>{switch(e.method){case s.MethodEnum.GET:t.length?await(0,o.getUser)(r,t[0]):await(0,o.getAllUsers)(r);break;case s.MethodEnum.POST:await(0,o.createUser)(e,r);break;case s.MethodEnum.PUT:await(0,o.updateUser)(e,r,t[0]);break;case s.MethodEnum.DELETE:await(0,o.deleteUser)(r,t[0]);break;default:(0,n.responseHandler)(r,s.StatusCodeEnum.BAD_REQUEST,"There is no such method.Check your request")}}},55:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UsersDB=void 0;const n=t(293);class s{constructor(){this.usersData=[]}static getInstance(){return s.instance||(s.instance=new s),s.instance}getAllUsers(){return this.usersData}getUserById(e){return this.usersData.find((r=>r.id===e))||null}createUser(e){const r={...e,id:(0,n.v4)()};return this.usersData.push(r),r}changeUserById(e,r){const t=this.usersData.findIndex((r=>r.id===e));if(t<0)return null;const n={...r,id:e};return this.usersData[t]=n,n}deleteUserById(e){const r=this.usersData.findIndex((r=>r.id===e));return r<0?null:(this.usersData.splice(r,1),!0)}}r.UsersDB=s},156:(e,r,t)=>{r.E=void 0;const n=t(67),s=t(48);r.E=(0,n.createServer)(((e,r)=>{(0,s.routesHandlers)(e,r)})),r.E.listen(4e3,(()=>{console.log("Server listening on 4000")}))},48:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.routesHandlers=void 0;const n=t(633),s=t(663),o=t(631),a=t(103);r.routesHandlers=async(e,r)=>{const t=(0,o.urlHandler)(e);"users"===t[0]?await(0,a.userController)(e,r,t.slice(1)):(0,s.responseHandler)(r,n.StatusCodeEnum.NOT_FOUND,"There is no such url")}},71:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.deleteUser=r.updateUser=r.createUser=r.getUser=r.getAllUsers=void 0;const n=t(55),s=t(663),o=t(633),a=t(136),d=t(285),i=t(586),u=n.UsersDB.getInstance();r.getAllUsers=async e=>{const r=u.getAllUsers();(0,s.responseHandler)(e,o.StatusCodeEnum.OK,JSON.stringify(r))},r.getUser=async(e,r)=>{if(!(0,a.reqUserIdHandler)(r,e))return;const t=u.getUserById(r);(0,d.dbResponseHandler)(t,e)},r.createUser=async(e,r)=>{try{const t=await(0,i.reqBodyHandler)(e),n=u.createUser(t);(0,d.dbResponseHandler)(n,r)}catch(e){const t=e;(0,s.responseHandler)(r,o.StatusCodeEnum.BAD_REQUEST,t)}},r.updateUser=async(e,r,t)=>{try{if(!(0,a.reqUserIdHandler)(t,r))return;const n=await(0,i.reqBodyHandler)(e),s=u.changeUserById(t,n);(0,d.dbResponseHandler)(s,r)}catch(e){const t=e;(0,s.responseHandler)(r,o.StatusCodeEnum.BAD_REQUEST,t)}},r.deleteUser=async(e,r)=>{if(!(0,a.reqUserIdHandler)(r,e))return;const t=u.deleteUserById(r);(0,d.dbResponseHandler)(t,e,!!t)}},285:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.dbResponseHandler=void 0;const n=t(663),s=t(633);r.dbResponseHandler=(e,r,t=!1)=>{t?(0,n.responseHandler)(r,s.StatusCodeEnum.BAD_REQUEST,"User was successfully deleted"):e?(0,n.responseHandler)(r,s.StatusCodeEnum.OK,JSON.stringify(e)):(0,n.responseHandler)(r,s.StatusCodeEnum.BAD_REQUEST,"There is no user with such id")}},663:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.responseHandler=void 0,r.responseHandler=(e,r,t)=>{e.statusCode=r,e.write(t),e.end()}},631:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.urlHandler=void 0,r.urlHandler=e=>{if(!e.url)return[];const r=e.url?.split("/").filter((e=>""!==e));return r?.length&&r.length>1?r?.slice(1):[]}},586:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.reqBodyHandler=void 0;const n=t(555);r.reqBodyHandler=async e=>new Promise((async(r,t)=>{const s=[];e.on("data",(e=>{s.push(e)})),e.on("end",(()=>{s.length||t('There are 3 required fields: "username": string,"age": string, "hobbies": [] | string[]');try{const e=JSON.parse(Buffer.concat(s).toString()),o=(0,n.reqBodyValidation)(e);o.isValid?r(o.body):t(o.body)}catch(e){t("Check fields in body")}}))}))},555:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.reqBodyValidation=void 0,r.reqBodyValidation=e=>{if(!e.hasOwnProperty("username")||!e.hasOwnProperty("age")||!e.hasOwnProperty("hobbies"))return{isValid:!1,body:'There are 3 required fields: "username": string,"age": string, "hobbies": [] | string[]'};const{id:r,username:t,age:n,hobbies:s}=e;return r?{isValid:!1,body:'Field "id" must not be sent'}:"string"==typeof t&&"number"==typeof n&&Array.isArray(s)?t.length<1||n<1?{isValid:!1,body:'"username" should be minimum 3 symbols, "age" should be more than 1'}:{isValid:!0,body:e}:{isValid:!1,body:'There are 3 required fields: "username" - string,"age" - string, "hobbies" - [] | string[]'}}},136:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.reqUserIdHandler=void 0;const n=t(663),s=t(633),o=t(743);r.reqUserIdHandler=(e,r)=>e?!!(0,o.userIdValidation)(e)||((0,n.responseHandler)(r,s.StatusCodeEnum.BAD_REQUEST,"Wrong id type"),!1):((0,n.responseHandler)(r,s.StatusCodeEnum.BAD_REQUEST,"Id must be provided to get user data"),!1)},743:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.userIdValidation=void 0,r.userIdValidation=e=>/^[a-zA-Z0-9]+-[a-zA-Z0-9]+-[a-zA-Z0-9]+-[a-zA-Z0-9]+-[a-zA-Z0-9]+$/.test(e)},293:(e,r,t)=>{t.r(r),t.d(r,{MAX:()=>n,NIL:()=>s,parse:()=>d,stringify:()=>l,v1:()=>b,v1ToV6:()=>m,v3:()=>S,v4:()=>D,v5:()=>O,v6:()=>A,v6ToV1:()=>I,v7:()=>R,validate:()=>a,version:()=>P});const n="ffffffff-ffff-ffff-ffff-ffffffffffff",s="00000000-0000-0000-0000-000000000000",o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,a=function(e){return"string"==typeof e&&o.test(e)},d=function(e){if(!a(e))throw TypeError("Invalid UUID");let r;const t=new Uint8Array(16);return t[0]=(r=parseInt(e.slice(0,8),16))>>>24,t[1]=r>>>16&255,t[2]=r>>>8&255,t[3]=255&r,t[4]=(r=parseInt(e.slice(9,13),16))>>>8,t[5]=255&r,t[6]=(r=parseInt(e.slice(14,18),16))>>>8,t[7]=255&r,t[8]=(r=parseInt(e.slice(19,23),16))>>>8,t[9]=255&r,t[10]=(r=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=r/4294967296&255,t[12]=r>>>24&255,t[13]=r>>>16&255,t[14]=r>>>8&255,t[15]=255&r,t},i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function u(e,r=0){return(i[e[r+0]]+i[e[r+1]]+i[e[r+2]]+i[e[r+3]]+"-"+i[e[r+4]]+i[e[r+5]]+"-"+i[e[r+6]]+i[e[r+7]]+"-"+i[e[r+8]]+i[e[r+9]]+"-"+i[e[r+10]]+i[e[r+11]]+i[e[r+12]]+i[e[r+13]]+i[e[r+14]]+i[e[r+15]]).toLowerCase()}const l=function(e,r=0){const t=u(e,r);if(!a(t))throw TypeError("Stringified UUID is invalid");return t},f=require("node:crypto");var c=t.n(f);const y=new Uint8Array(256);let p,h,v=y.length;function U(){return v>y.length-16&&(c().randomFillSync(y),v=0),y.slice(v,v+=16)}let g=0,E=0;const b=function(e,r,t){let n=r&&t||0;const s=r||new Array(16);let o=(e=e||{}).node,a=e.clockseq;if(e._v6||(o||(o=p),null==a&&(a=h)),null==o||null==a){const r=e.random||(e.rng||U)();null==o&&(o=[r[0],r[1],r[2],r[3],r[4],r[5]],p||e._v6||(o[0]|=1,p=o)),null==a&&(a=16383&(r[6]<<8|r[7]),void 0!==h||e._v6||(h=a))}let d=void 0!==e.msecs?e.msecs:Date.now(),i=void 0!==e.nsecs?e.nsecs:E+1;const l=d-g+(i-E)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||d>g)&&void 0===e.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=d,E=i,h=a,d+=122192928e5;const f=(1e4*(268435455&d)+i)%4294967296;s[n++]=f>>>24&255,s[n++]=f>>>16&255,s[n++]=f>>>8&255,s[n++]=255&f;const c=d/4294967296*1e4&268435455;s[n++]=c>>>8&255,s[n++]=255&c,s[n++]=c>>>24&15|16,s[n++]=c>>>16&255,s[n++]=a>>>8|128,s[n++]=255&a;for(let e=0;e<6;++e)s[n+e]=o[e];return r||u(s)};function m(e){const r=(t="string"==typeof e?d(e):e,Uint8Array.of((15&t[6])<<4|t[7]>>4&15,(15&t[7])<<4|(240&t[4])>>4,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,(15&t[1])<<4|(240&t[2])>>4,96|15&t[2],t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));var t;return"string"==typeof e?u(r):r}function _(e,r,t){function n(e,n,s,o){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const r=[];for(let t=0;t<e.length;++t)r.push(e.charCodeAt(t));return r}(e)),"string"==typeof n&&(n=d(n)),16!==(null===(a=n)||void 0===a?void 0:a.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(n),i.set(e,n.length),i=t(i),i[6]=15&i[6]|r,i[8]=63&i[8]|128,s){o=o||0;for(let e=0;e<16;++e)s[o+e]=i[e];return s}return u(i)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const S=_("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),c().createHash("md5").update(e).digest()})),T={randomUUID:c().randomUUID},D=function(e,r,t){if(T.randomUUID&&!r&&!e)return T.randomUUID();const n=(e=e||{}).random||(e.rng||U)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){t=t||0;for(let e=0;e<16;++e)r[t+e]=n[e];return r}return u(n)},O=_("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),c().createHash("sha1").update(e).digest()}));function A(e={},r,t=0){let n=b({...e,_v6:!0},new Uint8Array(16));if(n=m(n),r){for(let e=0;e<16;e++)r[t+e]=n[e];return r}return u(n)}function I(e){const r=(t="string"==typeof e?d(e):e,Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));var t;return"string"==typeof e?u(r):r}let H=null,w=null,B=0;const R=function(e,r,t){e=e||{};let n=r&&t||0;const s=r||new Uint8Array(16),o=e.random||(e.rng||U)(),a=void 0!==e.msecs?e.msecs:Date.now();let d=void 0!==e.seq?e.seq:null,i=w,l=H;return a>B&&void 0===e.msecs&&(B=a,null!==d&&(i=null,l=null)),null!==d&&(d>2147483647&&(d=2147483647),i=d>>>19&4095,l=524287&d),null!==i&&null!==l||(i=127&o[6],i=i<<8|o[7],l=63&o[8],l=l<<8|o[9],l=l<<5|o[10]>>>3),a+1e4>B&&null===d?++l>524287&&(l=0,++i>4095&&(i=0,B++)):B=a,w=i,H=l,s[n++]=B/1099511627776&255,s[n++]=B/4294967296&255,s[n++]=B/16777216&255,s[n++]=B/65536&255,s[n++]=B/256&255,s[n++]=255&B,s[n++]=i>>>4&15|112,s[n++]=255&i,s[n++]=l>>>13&63|128,s[n++]=l>>>5&255,s[n++]=l<<3&255|7&o[10],s[n++]=o[11],s[n++]=o[12],s[n++]=o[13],s[n++]=o[14],s[n++]=o[15],r||u(s)},P=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},67:e=>{e.exports=require("node:http")}},r={};function t(n){var s=r[n];if(void 0!==s)return s.exports;var o=r[n]={exports:{}};return e[n](o,o.exports,t),o.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t(156)})();